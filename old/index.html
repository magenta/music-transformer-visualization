<!DOCTYPE html>
<html lang="en">
  <head>
    <title>ðŸŽ¹</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="./style.css">
    <script src="./painter.js" defer></script>
    <script src="./painter_perf.js" defer></script>
    <script src="./script.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/@magenta/music@1.2.1"></script>
  </head>
  <body>
    <p>
      <label class="button">
        + Load file
        <input type="file" onchange="loadFile(event)">
      </label>
      <button onclick="reset()">Reset</button>
      <button class="no-border" onclick="previous()">
        <svg xmlns="http://www.w3.org/2000/svg" width="34" height="34" viewBox="0 0 24 24">
          <path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/>
        </svg>
      </button>
      <button class="no-border" onclick="next()">
        <svg xmlns="http://www.w3.org/2000/svg" width="34" height="34" viewBox="0 0 24 24">
          <path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/>
        </svg>
      </button>
      <span id="filenameSpan"></span>
    </p>

    <p>
      <div class="setting" id="noteWidth">
        <label>Note width (px)</label>
        <input type="number" value="50" min="0" max="200" step="1" onchange="changeNoteWidth(event)">
      </div>
      <div class="setting" id="timeScale">
        <label>Time scale</label>
        <input type="number" value="1" min="0" max="200" step="1" onchange="changeTimeScale(event)">
      </div>
      <div class="setting">
        <label>Note height (px)</label>
        <input type="number" value="8" min="0" max="200" step="1" onchange="changeNoteHeight(event)">
      </div>
      <div class="setting">
        <label>Arrow cutoff weight</label>
        <input type="number" value="0.5" min="0" max="1" step="0.01" onchange="changeWeightCutoff(event)">
      </div>
      <div class="setting">
        <label>Epsilon</label>
        <input type="number" value="0.00001" min="0" max="1" step="0.0001" onchange="changeEpsilon(event)">
      </div>
      <div class="setting">
        <label>Layer</label>
        <select id="layers"></select>
      </div>
      <div class="setting">
        <label>Head</label>
        <select id="heads"></select>
      </div>
      <div class="setting">
        <label>Step</label>
        <div id="stepText"></div>
      </div>
      <div class="setting" id="attnType">
        <label>Same-type only</label>
        <input type="checkbox" onchange="changeAttentionKind(event)">
      </div>
      <div class="setting" id="topMode">
        <label>Top weights only</label>
        <input type="checkbox" onchange="changeTopWeightsOnly(event)">
      </div>
      <div class="setting">
        <label>Top #</label>
        <input type="number" value="10" min="0" max="100" step="1" onchange="changeTopWeightsAmount(event)">
      </div>
      <div class="setting" id="greyLines">
        <label>Hide grey lines</label>
        <input type="checkbox" onchange="changeHideGreyLines(event)">
      </div>
      <div id="gradient"></div>
    </p>

    <svg id="music"></svg>

    <p>
      <button onclick="playOrPause(event)">Play</button>
      <button onclick="download(event)">Download MIDI</button>
      <p>
        <div id="stepsPerQuarter" class="setting">
          <label>Steps/quarter: </label>
          <input type="number" value="80" min="0" max="200" step="1" onchange="changeStepsPerQuarter(event)">
        </div>
        <div id="pixelsPerTimeStep" class="setting">
          <label>Time scale </label>
          <input type="number" value="1" min="0" max="200" step="1" onchange="changePixelsPerTimeStep(event)">
        </div>
      </p>
      <br>
      <div class="visualizer-container" id="container">
        <canvas id="canvas"></canvas>
      </div>
    </p>

    <div class="glitchButton" style="position:fixed;top:20px;right:20px;"></div>
    <script src="https://button.glitch.me/button.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/1.3.8/FileSaver.min.js" defer></script>
  </body>
</html>
